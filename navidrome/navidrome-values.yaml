# Override values for navidrome.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

image:
  repository: deluan/navidrome
  pullPolicy: IfNotPresent
  tag: 0.40.0

env:
  ND_DATAFOLDER: /data
  ND_IMAGECACHESIZE: 512MB
  ND_LOGLEVEL: info
  ND_MUSICFOLDER: /music
  ND_SCANINTERVAL: 6h
  ND_TRANSCODINGCACHESIZE: 512MB

podSecurityContext:
  fsGroup: 1000
  runAsUser: 1000

service:
  port: 
    port: 4533

ingress:
  enabled: true
  hosts:
    - host: navidrome.pleasenoddos.com
      paths:
        - path: /

resources: 
  # limits:
  #   cpu: 250m
  #   memory: 256Mi
  requests:
    cpu: 250m
    memory: 256Mi

persistence:
  config:
    enabled: true
    emptyDir: false
    mountPath: /data
    accessMode: ReadWriteOnce
    # Persistent Volume Storage Class
    storageClass: navidrome-data
    size: 1Gi
    # Do not delete the pvc upon helm uninstall
    skipuninstall: true
  music:
    enabled: true
    emptyDir: false
    mountPath: /music
    accessMode: ReadOnlyMany
    # Persistent Volume Storage Class
    storageClass: navidrome-music
    size: 100Gi
    # Do not delete the pvc upon helm uninstall
    skipuninstall: true

nodeSelector:
  k3s.io/hostname: k8s-node-1.tgp
