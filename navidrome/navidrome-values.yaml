# Override values for navidrome.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicas: 2

image:
  repository: deluan/navidrome
  pullPolicy: IfNotPresent
  # Pin to newer version
  tag: 0.42.0

env:
  ND_DATAFOLDER: /data
  ND_IMAGECACHESIZE: 512MB
  ND_LOGLEVEL: info
  ND_MUSICFOLDER: /music
  ND_SCANINTERVAL: 24h
  ND_TRANSCODINGCACHESIZE: 512MB

podSecurityContext:
  fsGroup: 1000
  runAsUser: 1000

service:
  port:
    port: 4533

ingress:
  enabled: true
  hosts:
    - host: navidrome.pleasenoddos.com
      paths:
        - path: /

resources:
  limits:
    cpu: 500m
    memory: 256Mi
  requests:
    cpu: 50m
    memory: 256Mi

persistence:
  config:
    enabled: true
    mountPath: /data
    accessMode: ReadWriteOnce
    # Persistent Volume Storage Class
    storageClass: navidrome-data
    size: 1Gi
    # Do not delete the pvc upon helm uninstall
    skipuninstall: true
  music:
    enabled: true
    mountPath: /music
    accessMode: ReadOnlyMany
    # Persistent Volume Storage Class
    storageClass: navidrome-music
    size: 100Gi
    # Do not delete the pvc upon helm uninstall
    skipuninstall: true

nodeSelector:
  kubernetes.io/hostname: k8s-node-1.tgp
