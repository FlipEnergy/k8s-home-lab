# Override values for bitwarden_rs.
replicaCount: 1

image:
  repository: bitwardenrs/server
  pullPolicy: IfNotPresent
  tag: 1.19.0

bitwardenrs:
  domain: https://bitwarden.pleasenoddos.com
  signupsAllowed: false
  gui:
    # If you set a different port here, you must also provide it under env
    port: 8080
  websockets:
    enabled: false
    port: 3012
  admin:
    enabled: false
    disableAdminToken: false
    existingSecret:
      enabled: true
      name: bitwarden-admin-token
      tokenKey: token

env:
  ROCKET_PORT: "8080"

podSecurityContext:
  fsGroup: 1000

securityContext:
  runAsNonRoot: true
  runAsUser: 1000

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: true
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: bitwarden.pleasenoddos.com
      paths:
        - /

resources:
  limits:
    cpu: 500m
    memory: 128Mi
  requests:
    cpu: 50m
    memory: 128Mi

nodeSelector:
  k3s.io/hostname: k8s-node-2.tgp

persistence:
  type: statefulset
  enabled: true
  size: 25Mi
  accessMode: ReadWriteOnce
  # Persistent Volume storage class
  storageClass: bitwarden
  ## Use existing Persistent Volume Claim
  # existingClaim:
